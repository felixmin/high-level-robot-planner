# LRZ H100 Single Node Configuration
# 1 node with 4x H100 GPUs

name: lrz_h100

compute:
  num_nodes: 1
  gpus_per_node: 1
  time_limit: "15:00:00"

slurm:
  enabled: true
  partition: mcml-hgx-h100-94x4
  qos: mcml
  account: null  # Set if needed
  
distributed:
  backend: nccl
  precision: bf16-mixed
  strategy: ddp  # DDP for single node, FSDP for large models
  
  # NCCL settings
  nccl_socket_ifname: ib0  # InfiniBand
  nccl_debug: WARN  # Set to INFO for debugging

storage:
  data_root: /dss/dssmcmlfs01/pn57pi/pn57pi-dss-0001/datasets
  checkpoint_dir: /dss/dssmcmlfs01/pn57pi/pn57pi-dss-0001/checkpoints
  log_dir: /dss/dssmcmlfs01/pn57pi/pn57pi-dss-0001/logs

# Container settings
container:
  image: /dss/dssmcmlfs01/pn57pi/pn57pi-dss-0001/containers/lapa.sqsh
  mounts:
    - /dss/dssmcmlfs01:/data

