# @package _group_

# Rich validation preset for LAQ cluster training.
# Includes per-dataset buckets plus flow/sequence/transfer/scatter analyses.

check_interval: 1000
limit_batches: 250
max_cached_samples: 512
num_fixed_samples: 8
num_random_samples: 8

buckets:
  language_table:
    filters: {dataset_name: "language_table"}
    max_samples: 128
  bridge:
    filters: {dataset_name: "bridge"}
    max_samples: 128
  rt1:
    filters: {dataset_name: "rt1"}
    max_samples: 128
  robonet:
    filters: {dataset_name: "robonet"}
    max_samples: 128
  droid:
    filters: {dataset_name: "droid"}
    max_samples: 128
  kuka:
    filters: {dataset_name: "kuka"}
    max_samples: 128
  taco_play:
    filters: {dataset_name: "taco_play"}
    max_samples: 128
  roboturk:
    filters: {dataset_name: "roboturk"}
    max_samples: 128
  jaco_play:
    filters: {dataset_name: "jaco_play"}
    max_samples: 128
  berkeley_autolab_ur5:
    filters: {dataset_name: "berkeley_autolab_ur5"}
    max_samples: 128

strategies:
  basic:
    enabled: true
    every_n_validations: 1
    visualize_train: true
    visualize_val: true
    visualize_per_bucket: true
  flow_visualization:
    enabled: true
    every_n_validations: 1
    num_samples: 8
  codebook_histogram:
    enabled: true
    every_n_validations: 2
  sequence_histogram:
    enabled: true
    every_n_validations: 2
    num_top_sequences: 50
  all_sequences_histogram:
    enabled: true
    every_n_validations: 2
  sequence_examples:
    enabled: true
    every_n_validations: 2
    top_k_sequences: 16
    examples_per_sequence: 4
  transfer_language_table:
    type: latent_transfer
    buckets: ["language_table"]
    every_n_validations: 3
    num_pairs: 128
  transfer_bridge:
    type: latent_transfer
    buckets: ["bridge"]
    every_n_validations: 3
    num_pairs: 128
  transfer_rt1:
    type: latent_transfer
    buckets: ["rt1"]
    every_n_validations: 3
    num_pairs: 128
  transfer_robonet:
    type: latent_transfer
    buckets: ["robonet"]
    every_n_validations: 3
    num_pairs: 128
  action_scatter_language_table:
    type: action_token_scatter
    buckets: ["language_table"]
    every_n_validations: 3
    num_samples: 256
  action_scatter_bridge:
    type: action_token_scatter
    buckets: ["bridge"]
    every_n_validations: 3
    num_samples: 256
  action_scatter_rt1:
    type: action_token_scatter
    buckets: ["rt1"]
    every_n_validations: 3
    num_samples: 256
  action_scatter_robonet:
    type: action_token_scatter
    buckets: ["robonet"]
    every_n_validations: 3
    num_samples: 256
