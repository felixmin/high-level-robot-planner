# Multi-Dataset LAQ Training Configuration
# Loads data from multiple sources with per-source filtering

name: laq_multi_dataset
task: laq

# Multi-source configuration - combines multiple datasets
sources:
  - type: youtube
    root: /mnt/data/datasets/youtube_new
    # Optional per-source filters
    # filters:
    #   contains_hand_sam3: true

  - type: bridge
    root: /mnt/data/datasets/bridgev2/raw
    # filters:
    #   environment: toykitchen1  # Only toykitchen1

# Batch size for training
batch_size: 32
num_workers: 4
prefetch_factor: 2
pin_memory: true

# Frame pair settings
image_size: 256
offset: 30

# Dataset mode
pair_level: true
offsets: [30]

# Metadata filtering (optional)
use_metadata: true
return_metadata: false
min_frames: 2

# Global filters applied after per-source filters
# filters:
#   dataset_type: ["youtube", "bridge"]  # If you want to limit dataset types

# --- Train/Val Split Settings ---
# Option 1: Ratio-based split (default)
split_mode: ratio
val_split: 0.1

# Option 2: Metadata-based split (hold out specific data)
# split_mode: metadata
# val_scene_filters:
#   video_id: "JNBtHDVoNQc_stabilized"  # Hold out one video
#   # OR
#   dataset_type: "bridge"  # Hold out entire dataset type
#   # OR
#   environment: "toykitchen7"  # Leave-one-environment-out

# --- Validation Buckets (for distribution shift analysis) ---
# Named subsets of validation data for separate evaluation
# val_buckets:
#   youtube_only:
#     dataset_type: "youtube"
#   bridge_only:
#     dataset_type: "bridge"
#   toykitchen_envs:
#     environment: ["toykitchen1", "toykitchen2", "toykitchen3"]

# Sampling settings
sampling_strategy: random
sampling_seed: 42
