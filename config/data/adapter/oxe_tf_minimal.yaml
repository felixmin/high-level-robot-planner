# @package data.adapter

# TF OXE adapter config for RAM-safe debugging:
# - no shuffle buffers
# - no prefetching
# - no concurrency

tf:
  pair_frames:
    mode: endpoints
    stride: 1
    n: 2

  debug:
    use_synthetic_data: false
    synthetic_num_samples: 10000

  iterator:
    persistent: true

  sampling:
    samples_per_episode: 0
    seed: 42

  train:
    episode_queue_shuffle_buffer: 0
    intra_episode_sample_shuffle_buffer: 0
    global_stream_shuffle_buffer: 0

  val:
    episode_queue_shuffle_buffer: 0
    intra_episode_sample_shuffle_buffer: 0
    global_stream_shuffle_buffer: 0

  prefetch:
    final_stream_buffer: 0
    per_dataset_stream_buffer: 0
    episode_queue_buffer: 0

  tfds_read:
    source: auto           # gcs|local|auto
    local_root: /dss/dssfs04/pn69za/pn69za-dss-0004/datasets/open-x-embodiment
    cycle_length: 1
    block_length: 1
    decode_parallelism: 1
    interleave_parallelism: 1

  pipeline:
    episode_concurrency: 1
    transform_parallelism: 1
    interleave_parallelism: 1

  mixing:
    mix_block_length: 1
    parallelism_mode: divide
    strategy: sample
    per_dataset_private_threadpool_size: 0
