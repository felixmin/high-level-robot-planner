# OXE All Datasets configuration
# Combines language_table, bridge, rt1, and robonet with weighted sampling
# Total: ~630k episodes across diverse robots and tasks

datasets:
  - name: language_table
    train_split: "train[:90%]"
    val_split: "train[90%:]"
    offset: 10                   # 1 second at 10Hz
    weight: 0.1                  # (442k episodes)
    size: 11934000               # Precomputed: ~442k × 0.9 × 30 pairs (avoids TF init)

  - name: bridge
    train_split: "train[:90%]"
    val_split: "train[90%:]"
    offset: 5                    # 1 second at 5Hz
    # weight: proportionate (25k episodes)
    size: 1031130                # Precomputed: ~25.5k × 0.9 × 45 pairs

  - name: rt1
    train_split: "train[:90%]"
    val_split: "train[90%:]"
    offset: 3                    # 1 second at 3Hz
    # weight: proportionate (87k episodes)
    size: 2113650                # Precomputed: ~87k × 0.9 × 27 pairs

  - name: robonet
    train_split: "train[:90%]"
    val_split: "train[90%:]"
    offset: 10                   # 1 second at 10Hz
    # weight: proportionate (83k episodes)
    size: 1494000                # Precomputed: ~83k × 0.9 × 20 pairs

# Shared settings
offset: 5                        # Default offset (overridden per-dataset)
image_size: 256
batch_size: 32
num_workers: 0                   # tf.data handles parallelism
episode_shuffle_buffer: 500      # Shuffle buffer for episodes
pair_shuffle_buffer: 1000        # Shuffle buffer for frame pairs
prefetch_buffer: -1              # -1 for AUTOTUNE, 0 disables prefetch
persistent_iterator: true        # Keep iterator alive to avoid shuffle buffer refill
samples_per_episode: 0           # LAPA-style: sample N pairs per episode (0 = all pairs)
return_metadata: true            # Required for validation strategies
sampling_seed: 42
episode_prefetch_buffer: 0
num_parallel_episodes: 1
num_parallel_calls: 1
val_episode_shuffle_buffer: 0
val_pair_shuffle_buffer: 0
