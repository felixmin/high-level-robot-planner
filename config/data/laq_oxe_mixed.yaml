# OXE Mixed Weighting Example
# Demonstrates mixed absolute mode: combine explicit weights with proportionate weighting
#
# Weight specification options:
# - Omitted or "proportionate": Share remaining weight by dataset size
# - Numeric (0.0-1.0): Exact sampling ratio (e.g., 0.3 = 30% of samples)
#
# Example below: bridge gets exactly 40%, remaining 60% split by size between others

datasets:
  - name: bridge
    train_split: "train[:90%]"
    val_split: "train[90%:]"
    offset: 5                    # 1 second at 5Hz
    weight: 0.4                  # Explicit: exactly 40% of samples

  - name: language_table
    train_split: "train[:90%]"
    val_split: "train[90%:]"
    offset: 10                   # 1 second at 10Hz
    # weight omitted = proportionate (share of remaining 60%)

  - name: rt1
    train_split: "train[:90%]"
    val_split: "train[90%:]"
    offset: 3                    # 1 second at 3Hz
    weight: proportionate        # Explicit proportionate (same as omitting)

# Shared settings
image_size: 256
batch_size: 32
num_workers: 0                   # tf.data handles parallelism
shuffle_buffer: 200              # Split across datasets
prefetch_buffer: 16              # Increased for better I/O overlap
persistent_iterator: true        # Keep iterator alive to avoid shuffle buffer refill
samples_per_episode: 1           # LAPA-style: sample N pairs per episode (0 = all pairs)
return_metadata: true            # Required for validation strategies
